{\rtf1\ansi\ansicpg1252\cocoartf1187\cocoasubrtf340
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural

\f0\b\fs28 \cf0 Overview\

\b0\fs24 \
This is a basic MIDI Library for the pic18F4550 microcontroller.  \
MIDI commands are sent out on pin 25 (RC6/TX/CK) via UART at 31250 baud\
Also included are musical timing functions.  If you desire to write a musical phrase, you will be able to set tempo\
and play notes and rests.\
\
Library created by Allen Lee [alee@meoworkshop.org]\
Revision History:\
\
rev. O: Not released.  Single channel only.\
rev. 1 (1-Oct/12): Multichannel support and timing functions added.\
\
\
\
\

\b\fs28 Functions
\b0\fs24 \
\

\b \ul MIDI 
\b0 \ulnone \
The following are basic MIDI commands.\
\
\

\b void midi_init(void)
\b0 \
Initializes the EUSART peripheral for MIDI Communication.\
\

\b void setBank(char channel, char bank)
\b0 \
Enables a user given bank for a specified channel.  Typically, the bank is 0x00\
\

\b void setVol(char channel, char vol)
\b0 \
Sets the volume (up to 127) for a specified channel.\
\

\b void setInstrument(char channel, char instr)
\b0 \
Sets the instrument type for a specified channel.\
For the VS1053b, the list of instruments can be found here: http://www.vlsi.fi/fileadmin/datasheets/vlsi/vs1053.pdf\
\

\b void playNote(char channel, char note)
\b0 \
Here is where you get your MIDI device to play a note.  The argument (note) accepts MIDI note numbers. \
You can learn more about them here: http://en.wikipedia.org/wiki/Note\
\

\b void stopNote(char channel, char note)
\b0 \
When you play a note for a certain amount of time you should stop it using this function.\
\

\b void txMIDI(char cmd, char data1, char data2)
\b0 \
For any commands that are not covered in this library, you can use the txMIDI() function to send them.  If your MIDI command\
is only one data byte long (after the command byte), put "0" as the "data2" argument\
\
\
\
\

\b \ul Timing
\b0 \ulnone \
Musical phrases consist of different note durations (ex. quarter notes, eighth notes) and rests.  Instead of using\
a delay function to accomplish this, the timing functions below can make the job of timing much easier.\
\
\

\b void setTempo(float tempo)
\b0 \
Sets the tempo in bpm.  Note, I assume a quarter note reference ie. each beat is a quarter note.  This is often \
shown in scores as (quarter note picture) = 60.\
\
IMPORTANT NOTE:  Because of some limitations in the delay functions I have used, the slowest tempo you can use is 94 bpm.  I will try to fix this limitation.\
\

\b void nr(char type)
\b0 \
Here is where the note or rest duration can be specified.  The following types are valid:\
	-'w' whole note/rest\
	-'h' half note/rest\
	-'q' quarter note/rest\
	-'e' eighth note/rest\
	-'s' sixteenth note/rest\
\
\
\
\

\b\fs28 Installation
\b0\fs24 \
\
This library was built in MPLabX.  There are two ways to use this library.\
\
1.  Simply copy and paste the sources (midi.c and midi.h) and add them to your project and make the proper #include definitions in your main.c file\
2.  Add the library into MPLabX.  You can find the instructions here: http://microchip.wikidot.com/mplab:how-to-work-with-libraries\
\
I hope to give a tutorial later for option 2.  For now, if you have any questions please e-mail me!\
\
\
\

\b\fs28 Sample Code
\b0\fs24 \
\
Sample code will be provided soon.\
}